<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/QuizzStyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>

</html>

<body>
    <section class="card">
        <div class="content">
            <div class="cabeçalho">
                <span class="voltar"><img src="../../Imagem/angulo-esquerdo.png" alt=""></span>
                <h3>Live Chat</h3>

                <span class="fechar"><img src="../../Imagem/cruz.png" alt=""></span>
            </div>

            <!--tag pai  -->
            <div class="chat" id="chat">

                <!-- primeira mensagem -->
                <div class="bot">
                    <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                    <div class="text-area">
                        <span class="text">Oii! Eu me chamo Cora e vou te ajudar durante seu atendimento, o que você
                            procura?</span>
                    </div>
                </div>

                <!-- inserir aqui -->

            </div>
            <div class="respostas" id="opcoes">
                <button onclick="clicou('Skin Care')" class="opcoes" value="Skin Care" id="0">Skin care</button>
                <button onclick="clicou('Camuflagem')" class="opcoes" value="Camuflagem" id="1">Camuflagem</button>
                <button onclick="clicou('Base')" class="opcoes" value="Base" id="2">Base</button>

            </div>
        </div>


    </section>
    <script>
        const chat = document.getElementById('chat');
        const opcoes = document.getElementById('opcoes');
        let i = 0; //contador
        //principal
        function clicou(resposta) {
            i++;
    const userChoice = resposta.toLowerCase(); // Convert the response to lowercase for case-insensitive comparison

    chat.innerHTML += htmlUsuario(resposta);

    let botResponse;
    if (userChoice === 'seca') {
        botResponse = "Você tem pele seca. Experimente este produto: ";
        htmlBotimg("../../Imagem/serumHidra.png");
    } else if (userChoice === 'mista') {
        botResponse = "Você tem pele mista. Experimente este produto: ";
        htmlBotimg("../../Imagem/serumAnti.png");
    } else if (userChoice === 'oleosa') {
        botResponse = "Você tem pele oleosa. Experimente este produto: ";
        htmlBotimg("../../Imagem/serumSeca.png");
    }

    chat.innerHTML += htmlBot(botResponse);
    opcoes.innerHTML = i < 2 ? htmlOpcoes(listasOpcoes()) : htmlOpcoesImg();
}

        //ordem de respostas do bot
        function respostasBot() {
            const respostas = {
                1: "Qual é o seu tipo de pele?",
            }
            //pula para a proxima resposta do objeto
            return respostas[i]
        }

        //estrutura do html do dialogo do bot
        function htmlBot(texto) {
            return `<div class="bot">
                        <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }
                function htmlBotimg(imageSrc) {
            return `<div class="bot">
                <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                <div class="text-area">
                    <span class="text"><img src="${imageSrc}" alt="" class="perfil"></span>
                </div>
            </div>`;
        }
        function listasOpcoes() {
            const lista = {
                1: ['seca', 'mista', 'oleosa'],
            }
            return lista[i]
        }

        //estrutura do html do dialogo do usuario
        function htmlUsuario(texto) {
            return `<div class="usuario">
                        <img src="../../Imagem/Usuario.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }

        function htmlOpcoes(opcao) {
            return i < 3 ? `<button onclick="clicou('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicou('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>
            <button onclick="clicou('${opcao[2]}')" class="opcoes" value="${opcao[2]}">${opcao[2]}</button>` : `<button onclick="clicou('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicou('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>`
        }
        function htmlOpcoesImg() {
            return `<button  class="opcoes" ><a href="http://">coloca o link aqui</a></button>`
        }

        //scroll do chat
        const emulatedScreen = document.querySelector('.chat');

        // Função para rolar a tela para baixo
        function scrollScreenDown() {
            emulatedScreen.scrollTop += 1000; // Ajuste o valor conforme necessário
        }

        // Observa as mudanças no conteúdo usando MutationObserver
        const observer = new MutationObserver((mutationsList, observer) => {
            // Rola a tela para baixo sempre que ocorrer uma mutação (adicionar elemento)
            scrollScreenDown();
        });

        // Opções para observar mudanças na estrutura do DOM
        const observerOptions = { childList: true, subtree: true };

        // Inicia a observação na tela de emulação
        observer.observe(emulatedScreen, observerOptions);
    </script>
</body>

</html>
