<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/QuizzStyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Live chat</title>
</head>

</html>




<body>
    <section class="card">
        <div class="content">
            <div class="cabeçalho">
                <a href="../html/inicio.html" target="_blank" class="botao"><img src="../../Imagem/angulo-esquerdo.png"></a>
                <h3>Live Chat</h3>

                
                <a href="../html/inicio.html" target="_blank" class="fechar"><img src="../../Imagem/cruz.png"></a>
            </div>

            <!--tag pai  -->
            <div class="chat" id="chat">

                <!-- primeira mensagem -->
                <div class="bot">
                    <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                    <div class="text-area">
                        <span class="text">Oii! Eu me chamo Cora e vou te ajudar durante seu atendimento, o que você
                            procura?</span>
                    </div>
                </div>

                <!-- inserir aqui -->

            </div>
            <div class="respostas" id="opcoes">
                <button onclick="clicouSC('Skin Care')" class="opcoes" value="Skin Care">Skin care</button>
                <button onclick="clicouC('Camuflagem')" class="opcoes" value="Camuflagem">Camuflagem</button>
                <button onclick="clicou('Base')" class="opcoes" value="Base">Base</span>

            </div>
        </div>


        <script>
            const chat = document.getElementById('chat');
            const opcoes = document.getElementById('opcoes');
            

            let i = 0;

            function clicouSC(resposta) {
            i++
            const userChoice = resposta.toLowerCase();

            chat.innerHTML += htmlUsuario(resposta)

                    let botResponse;
            if (userChoice === 'seca') {
                botResponse = "O Sérum Facial Nutritivo De Coco Melu é perfeito para peles secas como a sua, pois, possui ação nutritiva, relaxante, hidratante e reparadora contra os sinais de envelhecimento! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;) ";
                htmlBotimg("../../Imagem/serumHidra.png");
            } else if (userChoice === 'mista') {
                botResponse = "O Sérum Facial Hidratante De Pêssego é perfeito para peles mistas como a sua, pois, é composto por poderosos ativos que juntos possuem um alto poder hidratante, contém ácido hialurônico, vitamina E, aloe vera, algas marinhas e pantenol! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;)";
                htmlBotimg("../../Imagem/serumAnti.png");
            } else if (userChoice === 'oleosa') {
                botResponse = "O Sérum Facial Detox De Melancia Melu é perfeito para peles oleosas como a sua, pois, mantém o PH da sua pele equilibrado e protege contra futuras acnes! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;) ";
                htmlBotimg("../../Imagem/serumSeca.png");
            }
            chat.innerHTML += i < 2 ? htmlBot(respostasBot()) : htmlBot(botResponse) ; 
            opcoes.innerHTML = i < 2 ? htmlOpcoes(listasOpcoes()) : htmlOpcoesImg();

        }
        //ordem de respostas do bot
        function respostasBot() {
            const respostas = {
                1: "Qual é o seu tipo de pele?",
            }
            //pula para a proxima resposta do objeto
            return respostas[i]
        }function htmlBot(texto) {
            return `<div class="bot">
                        <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }
        function htmlBotimg(imageSrc) {
            return `<div class="bot">
                <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                <div class="text-area">
                    <span class="text"><img src="${imageSrc}" alt="" class="perfil"></span>
                </div>
            </div>`;
        }
        function listasOpcoes() {
            const lista = {
                1: ['Seca', 'Mista', 'Oleosa'],
            }
            return lista[i]
        }
        function htmlUsuario(texto) {
            return `<div class="usuario">
                        <img src="../../Imagem/Usuario.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }
        function htmlOpcoes(opcao) {
            return i < 3 ? `<button onclick="clicouSC('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicouSC('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>
            <button onclick="clicouSC('${opcao[2]}')" class="opcoes" value="${opcao[2]}">${opcao[2]}</button>` : `<button onclick="clicouSC('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicouSC('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>`
        }
        function htmlOpcoesImg() {
            return `<button  class="opcoes" ><a href="https://www.rubyrosemaquiagem.com.br/produto/3159-gel-creme-facial-antioxidante-kiwi-rr5600-melu">Ver mais sobre o produto</a></button>`
        }
        //camuflagem
        
        const opcoesC = document.getElementById('opcoesC');
            

            function clicouC(respostaC) {
            i++
            const userChoiceC = respostaC.toLowerCase();

            chat.innerHTML += htmlUsuarioC(respostaC)

                    let botResponse;
            if (userChoiceC === 'Vermelhas') {
                botResponse = "O Sérum Facial Nutritivo De Coco Melu é perfeito para peles secas como a sua, pois, possui ação nutritiva, relaxante, hidratante e reparadora contra os sinais de envelhecimento! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;) ";
                htmlBotimgC("../../Imagem/serumHidra.png");
            } else if (userChoiceC === 'Roxas') {
                botResponse = "O Sérum Facial Hidratante De Pêssego é perfeito para peles mistas como a sua, pois, é composto por poderosos ativos que juntos possuem um alto poder hidratante, contém ácido hialurônico, vitamina E, aloe vera, algas marinhas e pantenol! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;)";
                htmlBotimgC("../../Imagem/serumAnti.png");
            } else if (userChoiceC === 'Azuis') {
                botResponse = "O Sérum Facial Detox De Melancia Melu é perfeito para peles oleosas como a sua, pois, mantém o PH da sua pele equilibrado e protege contra futuras acnes! Tudo isso em um só tubinho. Gostou? Então clique no botão abaixo para conferir ;) ";
                htmlBotimgC("../../Imagem/serumSeca.png");
            }
            chat.innerHTML += i < 2 ? htmlBotC(respostasBotC()) : htmlBotC(botResponse) ; 
            opcoes.innerHTML = i < 2 ? htmlOpcoesC(listasOpcoesC()) : htmlOpcoesImgC();

        }
        //ordem de respostas do bot
        function respostasBotC() {
            const respostasC = {
                1: "Qual é o tom das manchas predominantes em seu rosto?",
            }
            //pula para a proxima resposta do objeto
            return respostasC[i]
        }function htmlBotC(texto) {
            return `<div class="bot">
                        <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }
        function htmlBotimgC(imageSrc) {
            return `<div class="bot">
                <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                <div class="text-area">
                    <span class="text"><img src="${imageSrc}" alt="" class="perfil"></span>
                </div>
            </div>`;
        }
        function listasOpcoesC() {
            const listaC = {
                1: ['Vermelhas', 'Azuis', 'Roxas'],
            }
            return listaC[i]
        }
        function htmlUsuarioC(texto) {
            return `<div class="usuario">
                        <img src="../../Imagem/Usuario.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }
        function htmlOpcoesC(opcao) {
            return i < 3 ? `<button onclick="clicouC('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicouC('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>
            <button onclick="clicouC('${opcao[2]}')" class="opcoes" value="${opcao[2]}">${opcao[2]}</button>` : `<button onclick="clicouC('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</button>
            <button onclick="clicouC('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</button>`
        }
        function htmlOpcoesImgC() {
            return `<button  class="opcoes" ><a href="https://www.rubyrosemaquiagem.com.br/produto/3159-gel-creme-facial-antioxidante-kiwi-rr5600-melu">Ver mais sobre o produto</a></button>`
        }
        

           
            //scroll do chat
            const emulatedScreen = document.querySelector('.chat');
    
            // Função para rolar a tela para baixo
            function scrollScreenDown() {
                emulatedScreen.scrollTop += 1000; // Ajuste o valor conforme necessário
            }
    
            // Observa as mudanças no conteúdo usando MutationObserver
            const observer = new MutationObserver((mutationsList, observer) => {
                // Rola a tela para baixo sempre que ocorrer uma mutação (adicionar elemento)
                scrollScreenDown();
            });
    
            // Opções para observar mudanças na estrutura do DOM
            const observerOptions = { childList: true, subtree: true };
    
            // Inicia a observação na tela de emulação
            observer.observe(emulatedScreen, observerOptions);
        </script>
    </body>
    
    </html>
