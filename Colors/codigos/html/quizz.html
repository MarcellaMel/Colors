<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/QuizzStyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>

</html>




<body>
    <section class="card">
        <div class="content">
            <div class="cabeçalho">
                <span class="voltar"><img src="../../Imagem/angulo-esquerdo.png" alt=""></span>
                <h3>Live Chat</h3>

                <span class="fechar"><img src="../../Imagem/cruz.png" alt=""></span>
            </div>

            <!--tag pai  -->
            <div class="chat" id="chat">

                <!-- primeira mensagem -->
                <div class="bot">
                    <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                    <div class="text-area">
                        <span class="text">Oii! Eu me chamo Cora e vou te ajudar durante seu atendimento, o que você
                            procura?</span>
                    </div>
                </div>

                <!-- inserir aqui -->

            </div>
            <div class="respostas" id="opcoes">
                <span onclick="clicouskin('Skin Care')" class="opcoes" value="Skin Care">Skin care</span>
                <span onclick="clicoucamuflagem('Camuflagem')" class="opcoes" value="Camuflagem">Camuflagem</span>
                <span onclick="clicoubase('Base')" class="opcoes" value="Base">Base</span>

            </div>
        </div>


    </section>
    <script>
        const chat = document.getElementById('chat');
        const opcoes = document.getElementById('opcoes');
        let i = 0; //contador
        //principal
        function clicouskin(resposta) {
            i++
            chat.innerHTML += htmlUsuario(resposta)
            chat.innerHTML += i < 2 ? htmlBot(respostasBotskin()) : htmlBotimg()
            opcoes.innerHTML = i < 2 ? htmlOpcoesskin(listasOpcoesskin()) : htmlOpcoesImg()

        }
        function clicoucamuflagem(resposta) {
            i++
            chat.innerHTML += htmlUsuario(resposta)
            chat.innerHTML += i < 2 ? htmlBot(respostasBotcamuflagem()) : htmlBotimg()
            opcoes.innerHTML = i < 2 ? htmlOpcoescamuflagem(listasOpcoescamuflagem()) : htmlOpcoesImg()

        }
        function clicoubase(resposta) {
            i++
            chat.innerHTML += htmlUsuario(resposta)
            chat.innerHTML += i < 2 ? htmlBot(respostasBotbase()) : window.open("http://localhost/Colors/codigos/html/Camera.html");
            opcoes.innerHTML = i < 2 ? htmlOpcoesbase(listasOpcoesbase()) : htmlOpcoesImg()

        }

        //ordem de respostas do bot
        function respostasBotskin() {
            const respostas = {
                1: "Qual é seu tipo de pele?"
            }
            //pula para a proxima resposta do objeto
            return respostas[i]
        }
        function respostasBotcamuflagem() {
            const respostas = {
                1: "Qual tipo de mancha é predominante no seu rosto?"
            }
            //pula para a proxima resposta do objeto
            return respostas[i]
        }
        function respostasBotbase() {
            const respostas = {
                1: "Entendi! Você pode experimentar seu tom ideal de base no nosso espelho virtual, para isso você permite o acesso a sua câmera?"
            }
            //pula para a proxima resposta do objeto
            return respostas[i]
        }

        //estrutura do html do dialogo do bot
        function htmlBot(texto) {
            return `<div class="bot">
                        <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }

        function htmlBotimg() {
            return `<div class="bot">
                        <img src="../../Imagem/Cora.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text"> <img src="../../Imagem/Usuario.jpeg" alt="" class="perfil"></span>
                        </div>
                    </div>`
        }
        function listasOpcoesskin() {
            const lista = {
                1: ['Seca', 'Mista', 'Oleosa']
            }
            return lista[i]
        }
        function listasOpcoescamuflagem() {
            const lista = {
                1: ['Vermelhas', 'Arroxeadas', 'Azuladas']
            }
            return lista[i]
        }
        function listasOpcoesbase() {
            const lista = {
                1: ['Permitir', 'Voltar para o início']
            }
            return lista[i]
        }

        //estrutura do html do dialogo do usuario
        function htmlUsuario(texto) {
            return `<div class="usuario">
                        <img src="../../Imagem/Usuario.jpeg" alt="" class="perfil">
                        <div class="text-area">
                            <span class="text">${texto}</span>
                        </div>
                    </div>`
        }

        function htmlOpcoesskin(opcao) {
            return i < 3 ? `<span onclick="clicouskin('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</span>
            <span onclick="clicouskin('${opcao[1]}')" class="opcoes" value="${opcao[2]}">${opcao[1]}</span>
            <span onclick="clicouskin('${opcao[2]}')" class="opcoes" value="${opcao[2]}">${opcao[2]}</span>` : `<span onclick="clicou('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</span>
            <span onclick="clicouskin('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</span>`
        }
        function htmlOpcoescamuflagem(opcao) {
            return i < 3 ? `<span onclick="clicoucamuflagem('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</span>
            <span onclick="clicoucamuflagem('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</span>
            <span onclick="clicoucamuflagem('${opcao[2]}')" class="opcoes" value="${opcao[2]}">${opcao[2]}</span>` : `<span onclick="clicou('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</span>
            <span onclick="clicoucamuflagem('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</span>`
        }
        function htmlOpcoesbase(opcao) {
            return i < 3 ? `<span onclick="clicoubase('${opcao[0]}')" class="opcoes" value="${opcao[0]}">${opcao[0]}</span>
            <span onclick="clicoubase('${opcao[1]}')" class="opcoes" value="${opcao[1]}">${opcao[1]}</span>` : `<span onclick="clicou('${opcao[0]}')" class="opcoes" value="${opcao[0]}"`
        }
        function htmlOpcoesImg() {
            return `<span  class="opcoes" ><a href="http://">Ver mais sobre o produto...</a></span>`
        }

        //scroll do chat
        const emulatedScreen = document.querySelector('.chat');

        // Função para rolar a tela para baixo
        function scrollScreenDown() {
            emulatedScreen.scrollTop += 1000; // Ajuste o valor conforme necessário
        }

        // Observa as mudanças no conteúdo usando MutationObserver
        const observer = new MutationObserver((mutationsList, observer) => {
            // Rola a tela para baixo sempre que ocorrer uma mutação (adicionar elemento)
            scrollScreenDown();
        });

        // Opções para observar mudanças na estrutura do DOM
        const observerOptions = { childList: true, subtree: true };

        // Inicia a observação na tela de emulação
        observer.observe(emulatedScreen, observerOptions);
    </script>
</body>

</html>
